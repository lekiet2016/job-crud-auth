<%- include('../partials/header') %>
<h2><%= product && product._id ? 'Edit Product' : 'New Product' %></h2>
<form action="<%= product && product._id ? '/products/' + product._id + '?_method=PUT' : '/products' %>" method="POST">
  <input name="name" required placeholder="Product name" value="<%= product.name || '' %>"><br>
  <input name="price" type="number" step="0.01" required placeholder="Price" value="<%= product.price || 0 %>"><br>
  <input name="quantity" type="number" required placeholder="Quantity" value="<%= product.quantity || 0 %>"><br>

  <label>Supplier</label><br>
  <select name="supplierId" required>
    <option value="">--Select--</option>
    <% suppliers.forEach(s => { %>
      <option value="<%= s._id %>" <%= product.supplierId && product.supplierId.equals && product.supplierId.equals(s._id) ? 'selected' : (product.supplierId == s._id ? 'selected' : '') %>><%= s.name %></option>
    <% }) %>
  </select><br><br>

  <button type="submit"><%= product && product._id ? 'Update' : 'Create' %></button>
</form>
<%- include('../partials/footer') %>
